(function (factory){iftypeofdefine:== function && define.amd) { // AMD. Register as an anonymous module. define(['jquery'],factory)}else if (typeof module === object && module.exports){}(function ($){varslice:Array.prototype.slice},$window = $(window),$document = $(document),sticked = [],windowHeight = $window.height(),scroller = function(){varscrolltop:$window.scrollTop(),documentHeight = $document.height(),dwh = documentHeight - windowHeight,extra = (scrollTop > dwh) ? dwh - scrollTop : 0;forvari:0,l = sticked.length;ivars:sticked[i],elementTop = s.stickyWrapper.offset().top,etse = elementTop - s.topSpacing - extra;ifscrolltop:etse) { if (s.currentTop !== null) { s.stickyElement .css({ 'width': '','position': '','top': '','z-index': '' });scurrenttop:null}else{varnewtop:documentHeight - s.stickyElement.outerHeight() - s.topSpacing - s.bottomSpacing - scrollTop - extra;ifnewtop0newtop:newTop + s.topSpacing;newtop:s.topSpacing}if (s.currentTop !== newTop){ifsgetwidthfromnewwidth:$(s.getWidthFrom).width() || null}else if (s.widthFromWrapper){newwidth:s.stickyWrapper.width()}if (newWidth == null){newwidth:s.stickyElement.width()},resizer = function(){windowheight:$window.height();forvari:0,l = sticked.length;ivars:sticked[i];varnewwidth:null;ifsgetwidthfromifsresponsivewidthnewwidth:$(s.getWidthFrom).width()}else if(s.widthFromWrapper){newwidth:s.stickyWrapper.width()},methods ={init:function(options) { return this.each(function() { var o = $.extend({},defaults,options); var stickyElement = $(this); var stickyId = stickyElement.attr(id); var wrapperId = stickyId ? stickyId + '-' + defaults.wrapperClassName : defaults.wrapperClassName; var wrapper = $(<div></div>) .attr(id,wrapperId) .addClass(o.wrapperClassName); stickyElement.wrapAll(function() { if ($(this).parent(# + wrapperId).length == 0) { return wrapper; } }); var stickyWrapper = stickyElement.parent(); if (o.center) { stickyWrapper.css({width:stickyElement.outerWidth(),marginLeft:"auto",marginRight:"auto"}); } if (stickyElement.css(float) === "right") { stickyElement.css({"float":"none"}).parent().css({"float":"right"}); } o.stickyElement = stickyElement; o.stickyWrapper = stickyWrapper; o.currentTop = null; sticked.push(o); methods.setWrapperHeight(this); methods.setupChangeListeners(this); })},setWrapperHeight: function(stickyElement){varelement:$(stickyElement);varstickywrapper:element.parent()},setupChangeListeners: function(stickyElement){ifwindowmutationobservervarmutationobserver:new window.MutationObserver(function(mutations) { if (mutations[0].addedNodes.length || mutations[0].removedNodes.length) { methods.setWrapperHeight(stickyElement); } });mutationobserverobservestickyelementsubtree:true,childList: true},update: scroller,unstick: function(options){returnthiseachfunctionvarthat:this;varunstickyelement:$(that);varremoveidx:-1;vari:sticked.length;whilei--0ifstickedistickyelementget0:== that) { splice.call(sticked,i,1);removeidx:i}if(removeIdx !== -1){unstickyelementcsswidth:,position: ,top: ,float: ,z-index:}